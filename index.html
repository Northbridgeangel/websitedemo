<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Escenario 3D – TFG</title>
    <style>
      body { margin: 0; overflow: hidden; background: #000; }
      #ui { position: absolute; top: 20px; left: 20px; z-index: 10; }
      button { margin: 5px; padding: 8px 14px; background: #fff; border: none; border-radius: 6px; cursor: pointer; }
    </style>
  </head>

  <body>
    <div id="ui">
      <button id="editar">Editar</button>
      <button id="mover">Mover</button>
      <button id="salir">Salir</button>
    </div>

    <!-- Scripts que sirven las librerías como variables globales -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.163.0/examples/js/loaders/GLTFLoader.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.163.0/examples/js/controls/OrbitControls.js" defer></script>

    <!-- Script principal -->
    <script>
      // 🔹 Escena, cámara, renderer
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x000000);

      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 2, 5);

      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // 🔹 Luz ambiental + direccional
      const ambient = new THREE.AmbientLight(0xffffff, 0.8);
      scene.add(ambient);
      const dirLight = new THREE.DirectionalLight(0xffffff, 1);
      dirLight.position.set(3, 5, 2);
      scene.add(dirLight);

      // 🔹 Controles orbitales
      const controls = new THREE.OrbitControls(camera, renderer.domElement);

      // 🔹 Cargamos el modelo GLB
      const loader = new THREE.GLTFLoader();
      loader.load(
        './escenario.glb',
        (gltf) => {
          const model = gltf.scene;
          model.scale.set(1, 1, 1);
          scene.add(model);
          console.log('Modelo cargado correctamente ✅');
        },
        undefined,
        (error) => {
          console.error('Error al cargar el modelo ❌', error);
        }
      );

      // 🔹 Cubo de prueba
      const cube = new THREE.Mesh(
        new THREE.BoxGeometry(1, 1, 1),
        new THREE.MeshStandardMaterial({ color: 0x00ff00 })
      );
      scene.add(cube);

      // 🔹 Ajuste del viewport al cambiar tamaño
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });

      // 🔹 Animación
      function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
      }
      animate();

      // 🔹 Botones de UI
      document.getElementById('editar').onclick = () => alert('Entrando en modo edición...');
      document.getElementById('mover').onclick = () => alert('Modo mover activado');
      document.getElementById('salir').onclick = () => alert('Saliendo de la interfaz');
    </script>
  </body>
</html>

